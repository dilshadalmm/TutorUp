<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiscorT Solver & Academic Connect</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Chewy&display=swap" rel="stylesheet">
    
    <!-- KaTeX CSS (Preload to prevent flash) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css">

    <!-- Tailwind Config to support specific animation classes used in the code -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        chewy: ['Chewy', 'cursive'],
                    },
                    keyframes: {
                        slideInBottom: {
                            '0%': { transform: 'translateY(1.25rem)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideInTop: {
                            '0%': { transform: 'translateY(-0.5rem)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    },
                    animation: {
                        'in': 'fadeIn 0.2s ease-out',
                        'slide-in-from-bottom-5': 'slideInBottom 0.3s ease-out',
                        'slide-in-from-top-2': 'slideInTop 0.2s ease-out',
                    }
                }
            }
        }
    </script>

    <!-- Import Map for React, Lucide, and Firebase -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.263.1",
            "firebase/app": "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js",
            "firebase/auth": "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js",
            "firebase/firestore": "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"
        }
    }
    </script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom Utilities */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Animation Utility Polyfills for tailwind-animate behavior */
        .animate-in { animation-duration: 0.3s; animation-fill-mode: forwards; }
        .slide-in-from-bottom-5 { animation-name: slideInBottom; }
        .fade-in { animation-name: fadeIn; }
        .slide-in-from-top-2 { animation-name: slideInTop; }
        
        @keyframes slideInBottom {
            from { transform: translateY(1.25rem); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideInTop {
            from { transform: translateY(-0.5rem); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* KaTeX Overrides */
        .katex-display { overflow-x: auto; overflow-y: hidden; padding-bottom: 4px; }
        
        /* Text Wrapping */
        .break-text-container {
            word-break: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }
    </style>
</head>
<body class="bg-gray-200">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            ThumbsUp, 
            Repeat, 
            MoreHorizontal, 
            Search, 
            Bell, 
            X,
            BookOpen,
            Send,
            MoreVertical,
            ArrowLeft,
            MessageSquare,
            Award,
            ImageIcon
        } from 'lucide-react';
        import { initializeApp } from 'firebase/app';
        import { 
            getAuth, 
            signInWithCustomToken, 
            signInAnonymously, 
            onAuthStateChanged,
        } from 'firebase/auth';
        import { 
            getFirestore, 
            collection, 
            addDoc, 
            onSnapshot, 
            doc, 
            updateDoc, 
            arrayUnion, 
            arrayRemove, 
            serverTimestamp,
            deleteField
        } from 'firebase/firestore';

        // --- Firebase Setup ---
        // Safety check for local previewing without env vars
        const getFirebaseConfig = () => {
            if (typeof __firebase_config !== 'undefined') {
                return JSON.parse(__firebase_config);
            }
            console.warn("Firebase config not found. Using mock config for UI rendering.");
            return { apiKey: "mock", authDomain: "mock", projectId: "mock" };
        };
        
        const firebaseConfig = getFirebaseConfig();
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // --- DiscorT Solver Component (The Chat Interface) ---
        const DiscorTSolver = ({ onClose }) => {
            const [messages, setMessages] = useState([
                {
                    id: 1,
                    sender: 'ai',
                    text: `Hello! ðŸ‘‹\n\nI'm your dedicated student study tool. While the AI solver is offline for maintenance, you can still use my features!\n\nCheck out the powerful KaTeX support:\n$$x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}$$\n\nOr use the integrated video player:\n*Load a specific study video by typing **#56788**.*`
                }
            ]);
            const [inputValue, setInputValue] = useState('');
            const chatContainerRef = useRef(null);

            // Video Constants
            const VIDEO_CODE = '#56788';
            const VIDEO_ID = 'bLlJCeziBVg'; 
            const EMBED_URL = `https://www.youtube.com/embed/${VIDEO_ID}`;

            // Load KaTeX Scripts
            useEffect(() => {
                const loadScript = (src) => {
                    return new Promise((resolve, reject) => {
                        // Prevent loading scripts multiple times
                        if (document.querySelector(`script[src="${src}"]`)) {
                            resolve();
                            return;
                        }
                        const script = document.createElement('script');
                        script.src = src;
                        script.onload = resolve;
                        script.onerror = reject;
                        document.head.appendChild(script);
                    });
                };

                // CSS is already loaded in <head> for performance, but keeping logic consistent
                const loadCSS = (href) => {
                    if (document.querySelector(`link[href="${href}"]`)) return;
                    const link = document.createElement('link');
                    link.rel = 'stylesheet';
                    link.href = href;
                    document.head.appendChild(link);
                };

                Promise.all([
                    loadScript('https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js'),
                ]).then(() => {
                    // Load auto-render after main katex
                    loadScript('https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js')
                        .then(() => {
                            // Initial Render
                            renderMath();
                        });
                });
            }, []);

            // Re-render math when messages change and scroll to bottom
            useEffect(() => {
                renderMath();
                if (chatContainerRef.current) {
                    chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;
                }
            }, [messages]);

            const renderMath = () => {
                if (window.renderMathInElement && chatContainerRef.current) {
                    window.renderMathInElement(chatContainerRef.current, {
                        delimiters: [
                            { left: '$$', right: '$$', display: true },
                            { left: '$', right: '$', display: false },
                            { left: '\\(', right: '\\)', display: false },
                            { left: '\\[', right: '\\]', display: true }
                        ],
                        throwOnError: false
                    });
                }
            };

            const handleSendMessage = (e) => {
                e.preventDefault();
                if (!inputValue.trim()) return;

                const userText = inputValue.trim();
                
                // Add User Message
                const newUserMsg = { id: Date.now(), sender: 'user', text: userText };
                setMessages(prev => [...prev, newUserMsg]);
                setInputValue('');

                // Logic
                if (userText === VIDEO_CODE) {
                    setTimeout(() => {
                        setMessages(prev => [
                            ...prev,
                            { 
                                id: Date.now() + 1, 
                                sender: 'ai', 
                                type: 'video',
                                text: `Video code **${VIDEO_CODE}** recognized. Playing "The Best Study Music: Lofi Hiphop Beats" for you now!`
                            }
                        ]);
                    }, 500);
                } else {
                    setTimeout(() => {
                        setMessages(prev => [
                            ...prev,
                            {
                                id: Date.now() + 1,
                                sender: 'ai',
                                text: `Thank you for your question! The main AI solver is currently **offline for routine maintenance**.\n\nPlease try again later. In the meantime, you can still enter the video code **#56788** for a quick study break!`
                            }
                        ]);
                    }, 500);
                }
            };

            // Helper to process formatting (bold, italic, newlines) for AI messages
            const formatText = (text) => {
                let formatted = text
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>');
                
                return formatted.split('\n').map((str, index) => (
                    <span key={index}>
                        <span dangerouslySetInnerHTML={{ __html: str }}></span>
                        <br />
                    </span>
                ));
            };

            return (
                <div className="fixed inset-0 z-[100] bg-white dark:bg-gray-800 flex flex-col overflow-hidden animate-in slide-in-from-bottom-5 duration-300 font-inter">
                    {/* Header - Changed to DiscorT branding */}
                    <header className="sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 shadow-sm flex items-center justify-between flex-shrink-0">
                        <div className="flex items-center gap-3">
                            <button onClick={onClose} className="p-2 bg-gray-100 dark:bg-gray-700 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                                <ArrowLeft size={20} />
                            </button>
                            <h1 className="text-xl font-bold font-chewy select-none">
                                <span className="text-gray-900 dark:text-white">Dis</span>
                                <span style={{ color: '#ff3635' }}>courT</span>
                            </h1>
                        </div>
                        <MoreVertical className="w-6 h-6 text-gray-500" />
                    </header>

                    {/* Chat Container */}
                    <main ref={chatContainerRef} className="flex-1 overflow-y-auto p-4 md:p-6 space-y-4 hide-scrollbar bg-gray-50 dark:bg-gray-900">
                        {messages.map((msg) => (
                            <div key={msg.id} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>
                                {msg.type === 'video' ? (
                                    // Video Player and accompanying text
                                    <div className="w-full max-w-lg my-2 rounded-xl overflow-hidden shadow-lg bg-black">
                                        <div className="aspect-video w-full">
                                            <iframe 
                                                width="100%" 
                                                height="100%" 
                                                src={`${EMBED_URL}?autoplay=1`}
                                                title="YouTube video player"
                                                frameBorder="0" 
                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                                allowFullScreen
                                                className="w-full h-full"
                                            ></iframe>
                                        </div>
                                        <div className="p-3 bg-gray-800 text-white text-sm break-text-container">
                                            {formatText(msg.text)}
                                        </div>
                                    </div>
                                ) : (
                                    // Standard Text Bubble - Added break-text-container class
                                    <div className={`p-3 rounded-lg max-w-[85%] md:max-w-md text-sm md:text-base break-text-container ${
                                        msg.sender === 'user' 
                                            ? 'bg-blue-600 text-white' 
                                            : 'bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100'
                                    }`}>
                                            {msg.sender === 'ai' ? formatText(msg.text) : msg.text}
                                    </div>
                                )}
                            </div>
                        ))}
                    </main>

                    {/* Footer */}
                    <footer className="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 flex-shrink-0">
                        <form onSubmit={handleSendMessage} className="flex items-center space-x-3 max-w-3xl mx-auto w-full">
                            <input 
                                type="text" 
                                value={inputValue}
                                onChange={(e) => setInputValue(e.target.value)}
                                placeholder="Enter a video code or type a message..."
                                className="flex-1 w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 font-inter"
                                autoComplete="off"
                            />
                            <button 
                                type="submit"
                                className="bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"
                            >
                                <Send className="w-5 h-5 ml-0.5" />
                            </button>
                        </form>
                    </footer>
                </div>
            );
        };

        // --- Main Component ---
        const AcademicConnect = () => {
            const [user, setUser] = useState(null);
            const [posts, setPosts] = useState([]);
            const [loading, setLoading] = useState(true);
            
            // Post & Solver State
            const [newPostContent, setNewPostContent] = useState('');
            const [newPostImage, setNewPostImage] = useState('');
            const [isImageInputVisible, setIsImageInputVisible] = useState(false);
            const [isPosting, setIsPosting] = useState(false);
            
            // Controls the DiscorT Solver Overlay
            const [isSolverOpen, setIsSolverOpen] = useState(false);

            // --- Auth & Data Fetching ---
            useEffect(() => {
                const initAuth = async () => {
                    try {
                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            await signInWithCustomToken(auth, __initial_auth_token);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (error) {
                        console.error("Auth error:", error);
                        // If auth fails completely (e.g. invalid config), stop loading so UI shows up
                        setLoading(false); 
                    }
                };

                initAuth();
                const unsubscribe = onAuthStateChanged(auth, (currentUser) => {
                    setUser(currentUser);
                    // If no user is logged in (auth not ready or failed), we might want to stop loading to show empty state
                    // But typically we wait for auth to resolve. 
                    if (!currentUser) setLoading(false); 
                });
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if (!user) return;

                const postsRef = collection(db, 'artifacts', appId, 'public', 'data', 'posts');
                
                const unsubscribe = onSnapshot(postsRef, (snapshot) => {
                    const fetchedPosts = snapshot.docs.map(doc => ({
                        id: doc.id,
                        ...doc.data()
                    }));

                    fetchedPosts.sort((a, b) => {
                        const timeA = a.createdAt?.toMillis() || Date.now();
                        const timeB = b.createdAt?.toMillis() || Date.now();
                        return timeB - timeA;
                    });

                    setPosts(fetchedPosts);
                    setLoading(false);
                }, (error) => {
                    console.error("Error fetching posts:", error);
                    setLoading(false);
                });

                return () => unsubscribe();
            }, [user]);

            // --- Actions ---
            const handleCreatePost = async () => {
                if (!newPostContent.trim() && !newPostImage) return;
                if (!user) return;

                setIsPosting(true);
                try {
                    const postsRef = collection(db, 'artifacts', appId, 'public', 'data', 'posts');
                    await addDoc(postsRef, {
                        userId: user.uid,
                        userName: user.displayName || `Student ${user.uid.slice(0, 4)}`,
                        content: newPostContent,
                        imageUrl: newPostImage,
                        likes: [],
                        comments: [],
                        // Removed votes field since polling is reverted
                        createdAt: serverTimestamp()
                    });
                    
                    setNewPostContent('');
                    setNewPostImage('');
                    setIsImageInputVisible(false);
                } catch (error) {
                    console.error("Error creating post:", error);
                } finally {
                    setIsPosting(false);
                }
            };

            const handleLike = async (post) => {
                if (!user) return;
                const postRef = doc(db, 'artifacts', appId, 'public', 'data', 'posts', post.id);
                const isLiked = post.likes.includes(user.uid);

                try {
                    if (isLiked) {
                        await updateDoc(postRef, { likes: arrayRemove(user.uid) });
                    } else {
                        await updateDoc(postRef, { likes: arrayUnion(user.uid) });
                    }
                } catch (error) {
                    console.error("Error updating like:", error);
                }
            };
            
            // Placeholder for Repost action
            const handleRepost = (postId) => {
                console.log(`Reposting post: ${postId}`);
                // In a real app, this would duplicate the post or share it.
            };

            // --- UI Sections ---

            if (loading) {
                return (
                    <div className="flex items-center justify-center h-screen bg-gray-100">
                        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
                    </div>
                );
            }
            
            const DefaultAvatar = () => (
                <div className="w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-white text-sm font-bold flex-shrink-0">
                    <BookOpen size={16}/>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-200 font-sans text-gray-900 pb-20 md:pb-0">
                    
                    {/* DiscorT Solver Overlay */}
                    {isSolverOpen && <DiscorTSolver onClose={() => setIsSolverOpen(false)} />}
                    
                    {/* Header */}
                    <header className="sticky top-0 z-50 shadow-sm" style={{ backgroundColor: '#1800AD' }}>
                        <div className="max-w-2xl mx-auto px-4 h-14 flex items-center justify-between">
                            <h1 className="text-4xl font-bold font-chewy select-none">
                                <span style={{ color: 'white' }}>Dis</span>
                                <span style={{ color: '#ff3635' }}>courT</span>
                            </h1>
                            
                            <div className="flex items-center space-x-3">
                                <button className="p-2 bg-white/30 rounded-full text-white hover:bg-white/50 transition">
                                    <Search size={18} />
                                </button>
                                <button className="hidden md:block p-2 bg-white/30 rounded-full text-white hover:bg-white/50 transition">
                                    <Bell size={18} />
                                </button>
                                <div className="bg-yellow-300 px-2 py-1 rounded border border-yellow-400 text-xs font-bold text-gray-900">
                                    {user?.displayName || 'YOU'}
                                </div>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-2xl mx-auto pt-2 px-0 md:px-2">
                        
                        {/* Create Post Widget */}
                        <div className="bg-white p-3 mb-2 shadow-sm md:rounded-lg">
                            <div className="flex space-x-3 mb-3">
                                <div className="flex-1 bg-gray-100 rounded-lg px-3 py-2 hover:bg-gray-200 transition-colors cursor-text relative">
                                    <textarea 
                                        placeholder={`Post a problem or discussion topic...`}
                                        className="bg-transparent w-full outline-none text-gray-700 placeholder-gray-500 resize-none h-16 text-sm font-medium"
                                        value={newPostContent}
                                        onChange={(e) => setNewPostContent(e.target.value)}
                                    />
                                </div>
                            </div>
                            
                            {isImageInputVisible && (
                                <div className="mb-2 animate-in fade-in slide-in-from-top-2">
                                    <div className="flex items-center bg-gray-50 border border-gray-200 rounded-lg px-3 py-2">
                                        <ImageIcon size={18} className="text-gray-400 mr-2" />
                                        <input 
                                            type="text"
                                            placeholder="Paste image URL here..."
                                            className="bg-transparent w-full outline-none text-sm text-gray-700"
                                            value={newPostImage}
                                            onChange={(e) => setNewPostImage(e.target.value)}
                                            autoFocus
                                        />
                                        <button onClick={() => { setIsImageInputVisible(false); setNewPostImage(''); }} className="ml-2 text-gray-400 hover:text-gray-600">
                                            <X size={16} />
                                        </button>
                                    </div>
                                    {newPostImage && (
                                        <div className="mt-2 relative h-32 w-full rounded-lg overflow-hidden bg-gray-100">
                                            <img src={newPostImage} alt="Preview" className="w-full h-full object-cover opacity-80" onError={(e) => (e.currentTarget.style.display = 'none')} />
                                        </div>
                                    )}
                                </div>
                            )}

                            <hr className="border-gray-100 mb-2" />
                            
                            <div className="flex items-center justify-between">
                                <button 
                                    onClick={() => setIsImageInputVisible(!isImageInputVisible)}
                                    className="flex items-center space-x-2 px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 transition text-gray-700"
                                >
                                    <ImageIcon className="text-green-600" size={16} />
                                    <span className="font-bold text-xs tracking-wide">Upload</span>
                                </button>
                                
                                <button 
                                    disabled={(!newPostContent && !newPostImage) || isPosting}
                                    onClick={handleCreatePost}
                                    className={`px-6 py-2 rounded-md font-bold text-xs transition-all uppercase tracking-wide ${
                                        (!newPostContent && !newPostImage) || isPosting
                                        ? 'bg-gray-200 text-gray-400 cursor-not-allowed'
                                        : 'bg-blue-600 text-white hover:bg-blue-700 shadow-sm'
                                    }`}
                                >
                                    {isPosting ? '...' : 'Post'}
                                </button>
                            </div>
                        </div>

                        {/* Feed */}
                        <div className="space-y-2">
                            {posts.map((post) => {
                                const isLiked = post.likes.includes(user?.uid);

                                return (
                                    <div key={post.id} className="bg-white shadow-sm md:rounded-lg overflow-hidden">
                                        
                                        {/* Post Header (Restored elements) */}
                                        <div className="p-3 pb-0 flex items-start justify-between">
                                            
                                            {/* Profile Info and Badges */}
                                            <div className="flex items-center space-x-3">
                                                <DefaultAvatar />
                                                <div className="flex flex-col">
                                                    <div className="flex items-center space-x-2">
                                                        <span className="font-semibold text-sm text-gray-900">{post.userName}</span>
                                                        {/* Academic Badge */}
                                                        <Award size={14} className="text-yellow-500 fill-yellow-500" /> 
                                                    </div>
                                                    {/* Timestamp */}
                                                    <span className="text-xs text-gray-500">Just now</span> 
                                                </div>
                                            </div>
                                            
                                            <button className="text-gray-400 hover:bg-gray-100 p-1 rounded">
                                                <MoreHorizontal size={18} />
                                            </button>
                                        </div>

                                        {/* Post Content */}
                                        <div className="px-4 py-2">
                                            <p className="text-gray-900 text-sm whitespace-pre-wrap leading-relaxed font-bold">
                                                {post.content}
                                            </p>
                                        </div>

                                        {post.imageUrl && (
                                            <div className="mt-1 bg-gray-50 w-full border-t border-b border-gray-100">
                                                <img 
                                                    src={post.imageUrl} 
                                                    alt="Post attachment" 
                                                    className="w-full h-auto max-h-[400px] object-contain mx-auto"
                                                    onError={(e) => {
                                                        e.currentTarget.src = 'https://placehold.co/600x400?text=Image+Not+Found';
                                                    }}
                                                />
                                            </div>
                                        )}
                                        
                                        {/* Likes Count/Stats Bar */}
                                        {post.likes.length > 0 && (
                                            <div className="px-4 pt-2 pb-1 flex justify-start border-t border-gray-100">
                                                <div className="flex items-center space-x-1 text-xs text-gray-500">
                                                    <ThumbsUp size={12} className="text-blue-600 fill-blue-600" />
                                                    <span className="font-medium">{post.likes.length} Likes</span>
                                                </div>
                                            </div>
                                        )}
                                        
                                        {/* Reverted Action Row (Like, Discuss, Repost) */}
                                        <div className="px-3 py-2 bg-white border-t border-gray-100">
                                            <div className="flex items-center justify-between gap-1">

                                                {/* Like Button */}
                                                <button 
                                                    onClick={() => handleLike(post)}
                                                    className={`flex-1 flex items-center justify-center p-2 rounded-lg font-medium text-xs transition-colors ${
                                                        isLiked 
                                                            ? 'text-blue-600 bg-blue-50 hover:bg-blue-100' 
                                                            : 'text-gray-500 hover:bg-gray-100'
                                                    }`}
                                                >
                                                    <ThumbsUp size={16} className={isLiked ? 'fill-blue-600 mr-2' : 'mr-2'} />
                                                    Like
                                                </button>

                                                {/* Repost Button */}
                                                <button 
                                                    onClick={() => handleRepost(post.id)}
                                                    className="flex-1 flex items-center justify-center p-2 rounded-lg font-medium text-xs text-gray-500 hover:bg-gray-100 transition-colors"
                                                >
                                                    <Repeat size={16} className="mr-2" />
                                                    Repost
                                                </button>

                                                {/* Discuss Button (Opens Chat Solver) */}
                                                <button 
                                                    onClick={() => setIsSolverOpen(true)}
                                                    className="flex-1 flex items-center justify-center p-2 rounded-lg font-medium text-xs text-gray-500 hover:bg-gray-100 transition-colors"
                                                >
                                                    <MessageSquare size={16} className="mr-2" />
                                                    Discuss
                                                </button>

                                            </div>
                                        </div>

                                    </div>
                                );
                            })}
                        </div>
                    </main>
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<AcademicConnect />);
    </script>
</body>
</html>

